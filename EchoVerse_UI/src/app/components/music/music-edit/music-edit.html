<div *ngIf="showEditForm" class="card mb-4">
  <div class="card-header gradient-color text-white">
    <div class="d-flex justify-content-between align-items-center">
      <h5 class="mb-0">
        <i class="bi bi-pencil-square me-2"></i>
        Edit Music: {{ musicToEdit?.title }}
      </h5>
      <button
        type="button"
        class="btn btn-sm gradient-color text-white"
        (click)="onClose()"
      >
        <i class="bi bi-x-lg"></i>
      </button>
    </div>
  </div>

  <div class="card-body">
    <form #editForm="ngForm" (ngSubmit)="onEditSubmit(editForm)">
      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">Title <span class="text-danger">*</span></label>
          <input
            type="text"
            class="form-control"
            name="title"
            [(ngModel)]="musicModel.title"
            required
            #titleField="ngModel"
            [class.is-invalid]="titleField.invalid && titleField.touched"
          />
          <div *ngIf="titleField.invalid && titleField.touched" class="invalid-feedback">
            Title is required
          </div>
        </div>

        <div class="col-md-6 mb-3">
          <label class="form-label">Artist <span class="text-danger">*</span></label>
          <input
            type="text"
            class="form-control"
            name="artist"
            [(ngModel)]="musicModel.artist"
            required
            #artistField="ngModel"
            [class.is-invalid]="artistField.invalid && artistField.touched"
          />
          <div *ngIf="artistField.invalid && artistField.touched" class="invalid-feedback">
            Artist is required
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">Album</label>
          <input
            type="text"
            class="form-control"
            name="album"
            [(ngModel)]="musicModel.album"
          />
        </div>

        <div class="col-md-6 mb-3">
          <label class="form-label">Release Year</label>
          <input
            type="number"
            class="form-control"
            name="releaseYear"
            [(ngModel)]="musicModel.releaseYear"
            min="1900"
            max="2100"
          />
        </div>
      </div>

      <div class="d-flex gap-2">
        <button
          type="submit"
          class="btn gradient-color text-white"
          [disabled]="!editForm.valid || loading"
        >
          <i class="bi bi-check-circle me-2"></i>
          Update Music
        </button>
        <button
          type="button"
          class="btn gradient-color text-white"
          (click)="onClose()"
        >
          <i class="bi bi-x-circle me-2"></i>
          Cancel
        </button>
      </div>
    </form>
  </div>
</div>
